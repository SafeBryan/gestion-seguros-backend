<div class="contratos-page-container">
  <div class="header-container">
     <div class="title-section"><mat-icon class="header-icon">description</mat-icon>
    <h1 class="page-title">Gestión de Contratos</h1></div>
    @if (!esCliente) {
      <button mat-raised-button color="primary" (click)="nuevoContrato()" class="nuevo-btn">
        <mat-icon>add</mat-icon>
        Nuevo Contrato
      </button>
    }
  </div>
  
  <mat-divider></mat-divider>
  
  <div class="content-container">
    <app-contratos-list (editar)="editarContrato($event)"></app-contratos-list>
  </div>
</div>

<!-- Template para el diálogo del formulario -->
<ng-template #formDialogTemplate>
  <div class="form-dialog-container">
    <div class="dialog-header">
      <h2 mat-dialog-title>{{ contratoAEditar?.id ? 'Editar Contrato' : 'Nuevo Contrato' }}</h2>
      <button mat-icon-button (click)="cerrarModalFormulario()" matTooltip="Cerrar" class="close-btn">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    
    <mat-divider></mat-divider>
    
    <div mat-dialog-content>
      <app-contratos-form 
        [contrato]="contratoAEditar" 
        (guardado)="alGuardar()" 
        (cancelado)="cancelarFormulario()">
      </app-contratos-form>
    </div>
  </div>
</ng-template>