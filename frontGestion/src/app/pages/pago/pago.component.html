<div class="pago-container">
  <h2>Registro de Pago</h2>

  <form [formGroup]="pagoForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="form-group">
      <label for="contratoId">ID del Contrato<span class="required">*</span></label>
      <input
        type="number"
        id="contratoId"
        formControlName="contratoId"
        [class.invalid]="pagoForm.get('contratoId')?.invalid && pagoForm.get('contratoId')?.touched"
        placeholder="Ingrese ID del contrato"
      />
      <div class="error" *ngIf="pagoForm.get('contratoId')?.invalid && pagoForm.get('contratoId')?.touched">
        El ID del contrato es obligatorio.
      </div>
    </div>

    <div class="form-group">
      <label for="metodo">Método de Pago<span class="required">*</span></label>
      <select
        id="metodo"
        formControlName="metodo"
        [class.invalid]="pagoForm.get('metodo')?.invalid && pagoForm.get('metodo')?.touched"
      >
        <option value="" disabled>Seleccione método</option>
        <option value="Débito">Débito</option>
        <option value="Transferencia">Transferencia</option>
        <option value="Efectivo">Efectivo</option>
        <option value="Tarjeta">Tarjeta</option>
      </select>
      <div class="error" *ngIf="pagoForm.get('metodo')?.invalid && pagoForm.get('metodo')?.touched">
        Seleccione un método de pago.
      </div>
    </div>

    <div class="form-group">
      <label for="monto">Monto<span class="required">*</span></label>
      <input
        type="number"
        step="0.01"
        id="monto"
        formControlName="monto"
        placeholder="Ingrese monto"
        [class.invalid]="pagoForm.get('monto')?.invalid && pagoForm.get('monto')?.touched"
      />
      <div class="error" *ngIf="pagoForm.get('monto')?.invalid && pagoForm.get('monto')?.touched">
        El monto es obligatorio y debe ser mayor que cero.
      </div>
    </div>

    <div class="form-group">
      <label for="referencia">Referencia</label>
      <input
        type="text"
        id="referencia"
        formControlName="referencia"
        placeholder="Ingrese referencia"
      />
    </div>

    <div class="form-group">
      <label for="observaciones">Observaciones</label>
      <textarea
        id="observaciones"
        formControlName="observaciones"
        rows="3"
        placeholder="Ingrese observaciones"
      ></textarea>
    </div>

    <div class="form-group">
      <label for="estado">Estado</label>
      <select id="estado" formControlName="estado">
        <option *ngFor="let estado of estadosDisponibles" [value]="estado">{{ estado }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="fechaPago">Fecha de Pago</label>
      <input type="date" id="fechaPago" formControlName="fechaPago" />
    </div>

    <div class="form-group">
      <label for="comprobante">Comprobante (Archivo)</label>
      <input type="file" id="comprobante" (change)="onFileChange($event)" />
      <small *ngIf="comprobanteNombre">Archivo seleccionado: {{ comprobanteNombre }}</small>
    </div>

    <button type="submit" [disabled]="cargando">Registrar Pago</button>
  </form>

  <p class="mensaje" *ngIf="mensaje">{{ mensaje }}</p>
</div>
